<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <%@ include file="../include/common_admin_head.jsp" %>
    <jsp:include page="../include/inc_lnb.jsp">
        <jsp:param name="menu_1depth" value="04"/>
        <jsp:param name="menu_2depth" value="03"/>
    </jsp:include>
</head>
<body>

<div class="containerWrap">
    <div class="container">
        <div class="top clearfix">
            <ul class="menu_dept clearfix">
                <li>고객센터</li>
                <li>배너관리</li>
            </ul>
        </div>
        <div class="current tabContent">
            <div class="cn_wrap srch_result">
                <div class="table_top clearfix">
                </div><!--// table_top -->
                <div class="table_selected clearfix mb7">
<%--                    <p>--%>
<%--                        선택한 항목을--%>
<%--                        <a href="#n" class="btn_r_navy" onClick="chkDel();">삭제</a>--%>
<%--                    </p>--%>
                    <p class="fl_right">
<%--                        <a class="btn_gray" id="btnExcel">엑셀다운로드</a>--%>
                        <a class="btn_red" id="btnInsert">등록</a>
                    </p>
                </div>
                <div id="bannergrid_body">
                </div>
            </div>
        </div>
    </div>
</div>
<!--// container -->
</body>

<script>
    var pageAction = function () {
        var init = function () {
            defaultDate();
            tableRender();
            eventBind();
        }

        function eventBind() {
            $("#btnInsert").click(function () {
                location.href='/board/bannerDetail.fund';
            });
        }

        function tableRender() {
            jsGridInit();

            $('#bannergrid_body').jsGrid({
                controller: {
                    loadData: function loadData(filter) {
                        var d = $.Deferred();
                        var param = {
                            // 검색param
                        };
                        //console.log(filter);
                        $.extend(filter, param);
                        //console.log(filter);
                        postJson('/api/v1/board/bannerList', filter, function (json) {
                            if (json.code != '200') {

                            }
                            d.resolve(json);
                        });
                        return d.promise();
                    }
                },
                fields: [ {
                    title:'NO',
                    name: "idx",
                    align: "center",
                    width: 60
                }, {
                    title:'제목',
                    name: "bannerTitle",
                    align: "center",
                    width: 140,
                    itemTemplate: function itemTemplate(value,row) {
                        var _anchor = genAnchor('javascript:void(0);',value).css("text-decoration", "underline").css("color", "blue");
                        _anchor.click(function(){
                            location.href='/board/bannerDetail.fund?idx='+row.idx;
                        });
                        return _anchor;
                    }
                }, {
                    title:'배너타입',
                    name: "bannerType",
                    align: "center",
                    width: 80
                }, {
                    title:'사용여부',
                    name: "useYn",
                    align: "center",
                    width: 60,
                    itemTemplate: function itemTemplate(value,row) {
                        let txt = '';
                        if (value == 'Y') {
                            txt = '사용'
                        } else if (value == 'N') {
                            txt = '미사틀'
                        }
                        return txt;
                    }
                },  {
                    title:'노출순서',
                    name: "orderIdx",
                    align: "center",
                    width: 60
                },{
                    title:'일시',
                    name: "regDtm",
                    width: 130,
                    align: "center",
                    itemTemplate: function itemTemplate(value,row) {
                        return moment(value).format('YYYY-MM-DD HH:mm');
                    }
                }
                ]
            });
        }

        function defaultDate() {
            var funcNm = '${vo.funcNm}';
            if(funcNm == "") {
                $(".dateSet:eq(5)").click();
                //fnsetDate(1, 0, 3);
            } else if (funcNm == "-1") {
                $(".dateSet").each(function() {
                    $(this).css("opacity", "0.5")
                });
                $("#funcNm").val(funcNm);
            } else {
                $(".dateSet:eq("+funcNm+")").click();
                //fnsetDate(1, 0, searchCnd);
            }

        }

        return {
            init : init
        }
    }

    $(function () {
        pageAction().init();
    });
</script>
</html>